<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Punteggio Tennis Live</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 20px;
        background-color: #f4f4f4;
    }
    h1 {
        margin-bottom: 10px;
    }
    .players input {
        font-size: 18px;
        padding: 5px;
        margin: 5px;
        width: 150px;
    }
    .scoreboard {
        display: flex;
        justify-content: space-around;
        margin: 20px 0;
        font-size: 22px;
        background: white;
        padding: 10px;
        border-radius: 8px;
    }
    button {
        font-size: 18px;
        padding: 10px 15px;
        margin: 5px;
        border: none;
        background: #28a745;
        color: white;
        border-radius: 5px;
        cursor: pointer;
    }
    button:hover {
        background: #218838;
    }
    .timer {
        font-size: 20px;
        margin: 15px 0;
    }
    .stats {
        background: white;
        padding: 10px;
        margin-top: 15px;
        border-radius: 8px;
        font-size: 18px;
    }
</style>
</head>
<body>

<h1>Punteggio Tennis Live</h1>

<div class="players">
    <input type="text" id="player1Name" placeholder="Giocatore 1" value="Giocatore 1">
    <input type="text" id="player2Name" placeholder="Giocatore 2" value="Giocatore 2">
</div>

<div class="timer">
    ‚è± Tempo partita: <span id="matchTimer">00:00</span>
</div>

<div class="scoreboard">
    <div>
        <div id="p1Name">Giocatore 1</div>
        <div>Game: <span id="p1Games">0</span></div>
        <div>Set: <span id="p1Sets">0</span></div>
        <div>Punti: <span id="p1Points">0</span></div>
        <button onclick="addPoint(1)">+ Punto</button>
    </div>
    <div>
        <div id="p2Name">Giocatore 2</div>
        <div>Game: <span id="p2Games">0</span></div>
        <div>Set: <span id="p2Sets">0</span></div>
        <div>Punti: <span id="p2Points">0</span></div>
        <button onclick="addPoint(2)">+ Punto</button>
    </div>
</div>

<div class="stats">
    <h3>Statistiche</h3>
    <div id="statsP1">üéØ 0 vincenti | ‚ùå 0 errori</div>
    <button onclick="addWinner(1)">+ Vincente P1</button>
    <button onclick="addError(1)">+ Errore P1</button>
    <br><br>
    <div id="statsP2">üéØ 0 vincenti | ‚ùå 0 errori</div>
    <button onclick="addWinner(2)">+ Vincente P2</button>
    <button onclick="addError(2)">+ Errore P2</button>
</div>

<script>
let p1Points = 0, p2Points = 0;
let p1Games = 0, p2Games = 0;
let p1Sets = 0, p2Sets = 0;
let p1Winners = 0, p1Errors = 0;
let p2Winners = 0, p2Errors = 0;
let inTieBreak = false;

const pointNames = ["0", "15", "30", "40", "AD"];

function updateDisplay() {
    document.getElementById("p1Name").textContent = document.getElementById("player1Name").value;
    document.getElementById("p2Name").textContent = document.getElementById("player2Name").value;
    document.getElementById("p1Points").textContent = inTieBreak ? p1Points : pointNames[p1Points] || p1Points;
    document.getElementById("p2Points").textContent = inTieBreak ? p2Points : pointNames[p2Points] || p2Points;
    document.getElementById("p1Games").textContent = p1Games;
    document.getElementById("p2Games").textContent = p2Games;
    document.getElementById("p1Sets").textContent = p1Sets;
    document.getElementById("p2Sets").textContent = p2Sets;
    document.getElementById("statsP1").textContent = `üéØ ${p1Winners} vincenti | ‚ùå ${p1Errors} errori`;
    document.getElementById("statsP2").textContent = `üéØ ${p2Winners} vincenti | ‚ùå ${p2Errors} errori`;
}

function addPoint(player) {
    if (inTieBreak) {
        if (player === 1) p1Points++;
        else p2Points++;
        if ((p1Points >= 7 || p2Points >= 7) && Math.abs(p1Points - p2Points) >= 2) {
            endGame(player);
            inTieBreak = false;
        }
    } else {
        if (player === 1) {
            if (p1Points >= 3 && p1Points - p2Points >= 1) {
                endGame(1);
            } else if (p1Points === 3 && p2Points === 3) {
                p1Points++;
            } else if (p1Points === 4) {
                endGame(1);
            } else p1Points++;
        } else {
            if (p2Points >= 3 && p2Points - p1Points >= 1) {
                endGame(2);
            } else if (p2Points === 3 && p1Points === 3) {
                p2Points++;
            } else if (p2Points === 4) {
                endGame(2);
            } else p2Points++;
        }
    }
    updateDisplay();
}

function endGame(winner) {
    if (winner === 1) p1Games++;
    else p2Games++;
    p1Points = 0; p2Points = 0;

    if (p1Games === 6 && p2Games === 6) {
        inTieBreak = true;
    } else if ((p1Games >= 6 || p2Games >= 6) && Math.abs(p1Games - p2Games) >= 2) {
        if (winner === 1) p1Sets++;
        else p2Sets++;
        p1Games = 0; p2Games = 0;
    }
}

function addWinner(player) {
    if (player === 1) p1Winners++;
    else p2Winners++;
    updateDisplay();
}

function addError(player) {
    if (player === 1) p1Errors++;
    else p2Errors++;
    updateDisplay();
}

// Timer partita
let seconds = 0;
setInterval(() => {
    seconds++;
    let m = String(Math.floor(seconds / 60)).padStart(2, '0');
    let s = String(seconds % 60).padStart(2, '0');
    document.getElementById("matchTimer").textContent = `${m}:${s}`;
}, 1000);

updateDisplay();
</script>

</body>
</html>
